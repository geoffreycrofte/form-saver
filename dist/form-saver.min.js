var FormSaver=function(a,b){b=b||{},this.form=document.getElementById(a)||document.querySelector('[name="'+a+'"]'),this.storType=b.storageType||"local",this.storDuration=b.storageDuration||30,this.storID=b.storageID||a,this.fields="input, select, textarea"};FormSaver.prototype=function(){var a={};const b=function(){if(!window.localStorage&&!window.sessionStorage)return!1;if(!this.form)return!1;a.storType="local"===this.storType?window.localStorage:window.sessionStorage;var b=this.form.querySelectorAll(this.fields),d=this.storID,f=0,g=b.length;for(g;f<g;f++)j(b[f])||(e(d,b[f]),m(b[f])||k(b[f])||l(b[f])?(b[f].addEventListener("change",c,!1),b[f].formID=d,b[f].field=b[f]):(b[f].addEventListener("blur",c,!1),b[f].formID=d,b[f].field=b[f]));return this},c=function(b){var c=b.target.formID,d=b.target.field;if(k(d))a.storType.setItem(c+"-"+d.name,d.id);else if(l(d)){var e=document.querySelectorAll('[name="'+d.name+'"]'),f=[],g=0;for(le=e.length;g<le;g++)e[g].checked&&f.push(e[g].id);a.storType.setItem(c+"-"+d.name,f)}else a.storType.setItem(c+"-"+h(d),d.value);return d},d=function(a){a=a||this.form.querySelectorAll(this.fields);var b=a.length,d=0;for(b;d<b;d++)j(a[d])||(target={target:{formID:this.storID,field:a[d]}},c(target))},e=function(a,b){var c=f(a,b);if(!c)return!1;if(k(b))document.getElementById(c).checked=!0;else if(l(b)){var d=0,e=c.split(","),g=e.length;for(d;d<g;d++)document.getElementById(e[d]).checked=!0}else if(m(b)){var h=b.querySelector('[value="'+c+'"]');h&&(b.querySelector("[selected]")&&b.querySelector("[selected]").removeAttribute("selected"),h.setAttribute("selected","selected"))}else{var i=document.getElementById(b.id)||document.querySelector('[name="'+b.name+'"]');i.value=c}return b},f=function(b,c){var d=a.storType.getItem(b+"-"+h(c));return d},g=function(b,c){return a.storType.removeItem(b+"-"+h(c)),c},h=function(a){return k(a)||l(a)?a.name:a.id||a.name},j=function(a){if("password"===a.type)return!0;const b=a.getAttribute("autocomplete");return!(!b||"cc-csc"!==b&&"new-password"!==b&&"current-password"!==b)||!(!a.dataset.fsSave||"false"!==a.dataset.fsSave)},k=function(a){return"radio"===a.type},l=function(a){return"checkbox"===a.type},m=function(a){return"SELECT"==a.tagName},n=function(){var a=this.form.querySelectorAll(this.fields),b=0;for(len=a.length;b<len;b++)m(a[b])||k(a[b])||l(a[b])?a[b].removeEventListener("change",c,!1):a[b].removeEventListener("blur",c,!1);return this},o=function(){var a=this.form.querySelectorAll(this.fields);for(len=a.length;i<len;i++)g(this.storID,a[i]);return this},p=function(){var a=this.form.querySelectorAll(this.fields),b={},c=this.storID,d=0;for(len=a.length;d<len;d++)b[c+"-"+h(a[d])]=f(c,a[d]);return b};return{init:b,pause:n,stop:n,save:d,destroy:o,getDatas:p}}(),window.Element&&!Element.prototype.closest&&(Element.prototype.closest=function(a){var b,c=(this.document||this.ownerDocument).querySelectorAll(a),d=this;do for(b=c.length;--b>=0&&c.item(b)!==d;);while(b<0&&(d=d.parentElement));return d});